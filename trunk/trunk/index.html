<html>
    <head>
        <title>
            XbmcWeb
        </title>

        <!-- START include style sheets -->
        <link rel="stylesheet" type="text/css" href="style/application/default.css" />
        <link rel="stylesheet" type="text/css" href="style/jquery/jquery.jgrowl.css" />
        <!-- END include style sheets -->

        <!-- START include jquery library -->
        <script type="text/javascript" src="library/jquery/jquery-1.4.2.min.js"></script>
        <!-- END include jquery library -->

        <!-- START include jquery plugins -->
        <script type="text/javascript" src="library/jquery/plugins/jquery.jgrowl_minimized.js"></script>
        <!-- END include jquery plugins -->

        <!-- START include XBMC library -->
        <script type="text/javascript" src="library/json.js"></script>
        <script type="text/javascript" src="library/xbmc/helper.class.js"></script>
        <script type="text/javascript" src="library/xbmc/jsonrpc.class.js"></script>
        <script type="text/javascript" src="library/xbmc/system.class.js"></script>
        <script type="text/javascript" src="library/xbmc/controls.class.js"></script>
        <script type="text/javascript" src="library/xbmc/player.class.js"></script>
        <script type="text/javascript" src="library/xbmc/playlist.class.js"></script>
        <script type="text/javascript" src="library/xbmc/files.class.js"></script>
        <script type="text/javascript" src="library/xbmc/videolibrary.class.js"></script>
        <script type="text/javascript" src="library/xbmc/videoplayer.class.js"></script>
        <script type="text/javascript" src="library/xbmc/musiclibrary.class.js"></script>
        <script type="text/javascript" src="library/xbmc/audioplayer.class.js"></script>
        <script type="text/javascript" src="library/xbmc/pictureplayer.class.js"></script>
        <script type="text/javascript" src="library/xbmc/xbmc.class.js"></script>
        <!-- END include XBMC library -->

        <!-- START include Application library -->
        <script type="text/javascript" src="config.js"></script>
        <!-- END include Application library -->

        <style type="text/css">
            html, body, table
            {
                font-family:        arial;
                font-size:          11px;
            }

            td
            {
                vertical-align:     top;
                width:              200px;
                border:             1px solid #DDD;
                padding:            10px;
            }

            h2
            {
                text-align:         center;
                background-color:   #DDD;
            }

            #demo
            {
            }

            #demo b
            {
                cursor:             pointer;
                text-decoration:    underline;
                font-weight:        normal;
            }

            #title
            {
                text-align:         center;
                border-bottom:      1px solid #555;
            }
        </style>
    </head>
<body>

    <h1 id="title">
        XBMC JSONRPC Javascript Api Demo
    </h1>
    <br />
    <br />
    <br />

    <table id="demo">
        <tr>
            <td>

                <h2>
                    JSONRPC
                </h2>
                <ul>
                    <li>
                        <b onclick="$.jGrowl(JSON.stringify(xbmc.JsonRpc.introspect()), {position: 'center', header: $(this).html()})">
                            Introspect
                        </b>
                    </li>
                    <li>
                        <b onclick="$.jGrowl(xbmc.JsonRpc.version(), {header: $(this).html()})">
                            Version
                        </b>
                    </li>
                    <li>
                        <b onclick="$.jGrowl(JSON.stringify(xbmc.JsonRpc.permission()), {header: $(this).html()})">
                            Permission
                        </b>
                    </li>
                    <li>
                        <b onclick="$.jGrowl(JSON.stringify(xbmc.JsonRpc.ping()), {header: $(this).html()})">
                            Ping
                        </b>
                    </li>
                    <li>
                        <b onclick="$.jGrowl(JSON.stringify(xbmc.JsonRpc.announce('XbmcWeb', 'Test message')), {header: $(this).html()})">
                            Announce
                        </b>
                    </li>
                </ul>

            </td>
            <td>

                <h2>
                    Player
                </h2>
                <ul>
                    <li>
                        <b onclick="$.jGrowl(JSON.stringify(xbmc.Player.getActivePlayers()), {header: $(this).html()})">
                            Get active players
                        </b>
                    </li>
                </ul>

            </td>
            <td>

                <h2>
                    AudioPlayer
                </h2>
                <ul>
                    <li>
                        <b onclick="$.jGrowl(JSON.stringify(xbmc.AudioPlayer.togglePause()), {header: $(this).html()})">
                            Play / Pause
                        </b>
                    </li>
                    <li>
                        <b onclick="$.jGrowl(JSON.stringify(xbmc.AudioPlayer.stop()), {header: $(this).html()})">
                            Stop
                        </b>
                    </li>
                    <li>
                        <b onclick="$.jGrowl(JSON.stringify(xbmc.AudioPlayer.skipPrevious()), {header: $(this).html()})">
                            Previous
                        </b>
                    </li>
                    <li>
                        <b onclick="$.jGrowl(JSON.stringify(xbmc.AudioPlayer.skipNext()), {header: $(this).html()})">
                            Next
                        </b>
                    </li>
                    <li>
                        <b onclick="$.jGrowl(JSON.stringify(xbmc.AudioPlayer.bigSkipForward()), {header: $(this).html()})">
                            Big skip forward
                        </b>
                    </li>
                    <li>
                        <b onclick="$.jGrowl(JSON.stringify(xbmc.AudioPlayer.bigSkipBackward()), {header: $(this).html()})">
                            Big skip backward
                        </b>
                    </li>
                    <li>
                        <b onclick="$.jGrowl(JSON.stringify(xbmc.AudioPlayer.smallSkipForward()), {header: $(this).html()})">
                            Small skip foward
                        </b>
                    </li>
                    <li>
                        <b onclick="$.jGrowl(JSON.stringify(xbmc.AudioPlayer.smallSkipBackward()), {header: $(this).html()})">
                            Small skip backward
                        </b>
                    </li>
                    <li>
                        <b onclick="$.jGrowl(JSON.stringify(xbmc.AudioPlayer.rewind()), {header: $(this).html()})">
                            Rewind
                        </b>
                    </li>
                    <li>
                        <b onclick="$.jGrowl(JSON.stringify(xbmc.AudioPlayer.forward()), {header: $(this).html()})">
                            Forward
                        </b>
                    </li>
                    <li>
                        <b onclick="$.jGrowl(JSON.stringify(xbmc.AudioPlayer.getTime()), {header: $(this).html()})">
                            Get Time (seconds)
                        </b>
                    </li>
                    <li>
                        <b onclick="$.jGrowl(JSON.stringify(xbmc.AudioPlayer.getTimeMs()), {header: $(this).html()})">
                            Get Time (miliseconds)
                        </b>
                    </li>
                    <li>
                        <b onclick="$.jGrowl(JSON.stringify(xbmc.AudioPlayer.getPercentage()), {header: $(this).html()})">
                            Get Percentage of playing time
                        </b>
                    </li>
                    <li>
                        <script type="text/javascript">
                            function setSeekTime ()
                            {
                                var s_timeMs = xbmc.AudioPlayer.getTimeMs();

                                if (s_timeMs.total == 0)
                                    $.jGrowl("No music is playing!")
                                else
                                {
                                    var i_userValue = prompt("Enter a value between 0 and " +s_timeMs.total);

                                    if (!xbmc.Helper.isInt(i_userValue))
                                        i_userValue = prompt("Please enter a numeric value between 0 and " +s_timeMs.total);

                                    if (s_timeMs.total > 0 && i_userValue <= s_timeMs.total)
                                    {
                                        var b_seekTimeSet = xbmc.AudioPlayer.seekTime(i_userValue);

                                        if (b_seekTimeSet)
                                        {
                                            s_timeMs = xbmc.AudioPlayer.getTimeMs();

                                            if (s_timeMs)
                                                $.jGrowl("Seek time successfully set to " +s_timeMs.time+ "ms");
                                        }
                                        else
                                            $.jGrowl("Seek time could not be set to " +i_userValue);
                                    }
                                    else
                                        $.jGrowl("The value enterd is to high...");
                                }
                            }
                        </script>
                        <b onclick="setSeekTime()">
                            Set seek time
                        </b>
                    </li>
                    <li>
                        <b onclick="$.jGrowl(JSON.stringify(xbmc.AudioPlayer.record()), {header: $(this).html()})">
                            Record
                        </b>
                    </li>
                </ul>

            </td>
        </tr>
    </table>

</body>
</html>
